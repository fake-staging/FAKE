<!DOCTYPE html>
<html lang="en" class="has-navbar-fixed-top">

<head>
	<title>Running targets in "FAKE - F# Make"
</title>
	<meta charset="utf-8" />

	<!-- from https://realfavicongenerator.net -->
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
	<meta name="msapplication-TileColor" content="#2d89ef">
	<meta name="theme-color" content="#ffffff">


	<meta name="author" content="Steffen Forkmann, Mauricio Scheffer, Colin Bull, Matthias Dittrich" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU"
	 crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.1/css/bulma.css">
	<link rel="stylesheet" href="/assets/css/bulmaswatch.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/themes/prism-tomorrow.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/plugins/toolbar/prism-toolbar.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/plugins/line-numbers/prism-line-numbers.css">
	<link rel="stylesheet" href="/assets/css/style.css">
</head>

<body>
	<nav class="navbar is-dark is-fixed-top" role="navigation" aria-label="main navigation">
		<div class="navbar-brand">
			<a class="navbar-item no-hover" href="/">
				<img src="/assets/img/logo.svg" alt="FAKE - F# Make - A DSL for build tasks and more" width="28" height="28">
				<span class="p-l-sm">FAKE</span>
			</a>

			<a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbar">
				<span aria-hidden="true"></span>
				<span aria-hidden="true"></span>
				<span aria-hidden="true"></span>
			</a>
		</div>

		<div id="navbar" class="navbar-menu">
			<div class="navbar-start">
				<div class="navbar-item has-dropdown is-hoverable">
					<a class="navbar-link">Tutorials</a>
					<div class="navbar-dropdown">
						<a href="/fake-gettingstarted.html" class="navbar-item">Getting started</a>
						<a href="/fake-commandline.html" class="navbar-item">Running FAKE from command line</a>
						<a href="/fake-template.html" class="navbar-item">FAKE template</a>
						<a href="/fake-debugging.html" class="navbar-item">Debugging scripts</a>
                        <a href="/fake-completion.html" class="navbar-item">FAKE command-line completion</a>
					</div>
				</div>

				<div class="navbar-item has-dropdown is-hoverable">
					<a class="navbar-link">About</a>
					<div class="navbar-dropdown" class="navbar-item">
						<a href="/help-users.html" class="navbar-item">Who is using FAKE?</a>
						<a href="/help-supporters.html" class="navbar-item">Supporters</a>
						<a href="https://www.nuget.org/packages/FAKE" class="navbar-item">NuGet</a>
						<a href="https://chocolatey.org/packages/fake" class="navbar-item">Chocolatey</a>
						<a href="https://github.com/fsharp/FAKE/blob/master/License.txt" class="navbar-item">License</a>
						<a href="/RELEASE_NOTES.html" class="navbar-item">Release Notes</a>
						<a href="/contributing.html" class="navbar-item">Contributing</a>
						<a href="https://github.com/fsharp/FAKE/issues/new" class="navbar-item">Ask a question or
							report a bug</a>
					</div>
				</div>

				<div class="navbar-item has-dropdown is-hoverable">
					<a href="/fake-fake5-modules.html" class="navbar-link">Modules</a>
					<div class="navbar-dropdown" class="navbar-item">
						<div class="navbar-item has-dropdown is-hoverable">
							<a href="/apidocs/v5/index.html#Fake.Api" class="navbar-link">API</a>
							<div class="navbar-dropdown" class="navbar-item">
								<a href="/api-slack.html" class="navbar-item">Slack</a>
								<a href="/apidocs/v5/fake-api-github.html" class="navbar-item">GitHub</a>
								<a href="/apidocs/v5/fake-api-hockeyapp.html" class="navbar-item">HockeyApp</a>
							</div>
						</div>
						<div class="navbar-item has-dropdown is-hoverable">
							<a href="/apidocs/v5/index.html#Fake.Azure" class="navbar-link">Azure</a>
							<div class="navbar-dropdown" class="navbar-item">
								<a href="/apidocs/v5/fake-azure-cloudservices.html" class="navbar-item">CloudServices</a>
								<a href="/apidocs/v5/fake-azure-emulators.html" class="navbar-item">Emulators</a>
								<a href="/apidocs/v5/fake-azure-kudu.html" class="navbar-item">Kudu</a>
								<a href="/apidocs/v5/fake-azure-webjobs.html" class="navbar-item">WebJobs</a>
							</div>
						</div>
						<div class="navbar-item has-dropdown is-hoverable">
							<a href="/buildserver.html" class="navbar-link">BuildServer</a>
							<div class="navbar-dropdown" class="navbar-item">
								<a href="/apidocs/v5/index.html#Fake.BuildServer" class="navbar-item">Api-Reference</a>
								<a href="/apidocs/v5/fake-buildserver-appveyor.html" class="navbar-item">AppVeyor</a>
								<a href="/apidocs/v5/fake-buildserver-teamfoundation.html" class="navbar-item">Azure
									DevOps</a>
								<a href="/apidocs/v5/fake-buildserver-gitlab.html" class="navbar-item">GitLab</a>
								<a href="/apidocs/v5/fake-buildserver-teamcity.html" class="navbar-item">TeamCity</a>
								<a href="/apidocs/v5/fake-buildserver-travis.html" class="navbar-item">Travis</a>
							</div>
						</div>
						<div class="navbar-item has-dropdown is-hoverable">
							<a href="/core.html" class="navbar-link">Core</a>
							<div class="navbar-dropdown" class="navbar-item">
								<a href="/apidocs/v5/fake-core-buildserver.html" class="navbar-item">BuildServer</a>
								<a href="/apidocs/v5/fake-core-changelog.html" class="navbar-item">ChangeLog</a>
								<a href="/core-commandlineparsing.html" class="navbar-item">CommandLineParsing</a>
								<a href="/apidocs/v5/fake-core-context.html" class="navbar-item">Context</a>
								<a href="/apidocs/v5/fake-core-environment.html" class="navbar-item">Environment</a>
								<a href="/core-process.html" class="navbar-item">Process</a>
								<a href="/apidocs/v5/fake-core-releasenotes.html" class="navbar-item">ReleaseNotes</a>
								<a href="/apidocs/v5/fake-core-semver.html" class="navbar-item">SemVer</a>
								<a href="/apidocs/v5/fake-core-string.html" class="navbar-item">String</a>
								<a href="/core-targets.html" class="navbar-item">Targets</a>
								<a href="/apidocs/v5/fake-core-taskrunner.html" class="navbar-item">Tasks</a>
								<a href="/core-trace.html" class="navbar-item">Trace</a>
								<a href="/apidocs/v5/fake-core-userinput.html" class="navbar-item">UserInput</a>
								<a href="/core-vault.html" class="navbar-item">Vault</a>
								<a href="/apidocs/v5/fake-core-xml.html" class="navbar-item">Xml</a>
							</div>
						</div>
						<div class="navbar-item has-dropdown is-hoverable">
							<a href="/apidocs/v5/index.html#Fake.Documentation" class="navbar-link">Documentation</a>
							<div class="navbar-dropdown" class="navbar-item">
								<a href="/apidocs/v5/fake-documentation-docfx.html" class="navbar-item">DocFx</a>
							</div>
						</div>
						<div class="navbar-item has-dropdown is-hoverable">
							<a href="/apidocs/v5/index.html#Fake.DotNet" class="navbar-link">DotNet</a>
							<div class="navbar-dropdown" class="navbar-item">
								<a href="/dotnet-cli.html" class="navbar-item">Cli</a>
								<a href="/dotnet-assemblyinfo.html" class="navbar-item">AssemblyInfoFile</a>
								<a href="/apidocs/v5/fake-dotnet-fsc.html" class="navbar-item">Fsc</a>
								<a href="/apidocs/v5/fake-dotnet-fsi.html" class="navbar-item">Fsi</a>
								<a href="/apidocs/v5/fake-dotnet-fxcop.html" class="navbar-item">FxCop</a>
								<a href="/apidocs/v5/fake-dotnet-msbuild.html" class="navbar-item">MSBuild</a>
								<a href="/apidocs/v5/fake-dotnet-ilmerge.html" class="navbar-item">ILMerge</a>
								<a href="/apidocs/v5/fake-dotnet-testing-nunit3.html" class="navbar-item">Testing -
									NUnit</a>
								<a href="/apidocs/v5/fake-dotnet-testing-mspec.html" class="navbar-item">Testing -
									MSpec</a>
								<a href="/apidocs/v5/fake-dotnet-testing-xunit2.html" class="navbar-item">Testing -
									XUnit2</a>
								<a href="/apidocs/v5/fake-dotnet-testing-expecto.html" class="navbar-item">Testing -
									Expecto</a>
								<a href="/apidocs/v5/fake-dotnet-testing-vstest.html" class="navbar-item">Testing -
									VSTest</a>
								<a href="/fake-dotnet-testing-specflow.html" class="navbar-item">Testing - SpecFlow</a>
								<a href="/dotnet-testing-opencover.html" class="navbar-item">Testing - OpenCover</a>
								<a href="/apidocs/v5/fake-dotnet-testing-dotcover.html" class="navbar-item">Testing -
									DotCover</a>
								<a href="/dotnet-nuget.html" class="navbar-item">NuGet</a>
								<a href="/apidocs/v5/fake-dotnet-mage.html" class="navbar-item">Mage</a>
								<a href="/apidocs/v5/fake-dotnet-paket.html" class="navbar-item">Paket</a>
								<a href="/apidocs/v5/fake-dotnet-xdt.html" class="navbar-item">XML Transforms</a>
							</div>
						</div>
						<div class="navbar-item has-dropdown is-hoverable">
							<a href="/core-targets.html" class="navbar-link">DSL</a>
							<div class="navbar-dropdown" class="navbar-item">
								<a href="https://github.com/vbfox/FoxSharp/blob/master/src/BlackFox.Fake.BuildTask/Readme.md" class="navbar-item">BlackFox.Fake.BuildTask</a>
								<a href="https://github.com/xakebuild/Xake" class="navbar-item">Xake</a>
							</div>
						</div>
						<div class="navbar-item has-dropdown is-hoverable">
							<a href="/apidocs/index.html#Fake.Installer" class="navbar-link">Installer</a>
							<div class="navbar-dropdown" class="navbar-item">
								<a href="/apidocs/v5/fake-installer-innosetup.html" class="navbar-item">InnoSetup</a>
								<a href="/fake-installer-squirrel.html" class="navbar-item">Squirrel</a>
								<a href="/apidocs/v5/fake-installer-wix.html" class="navbar-item">Wix</a>
							</div>
						</div>
						<div class="navbar-item has-dropdown is-hoverable">
							<a href="/apidocs/index.html#Fake.IO" class="navbar-link">IO</a>
							<div class="navbar-dropdown" class="navbar-item">
								<a href="/apidocs/v5/index.html#Fake.IO" class="navbar-item">FileSystem</a>
								<a href="/apidocs/v5/fake-io-changewatcher.html" class="navbar-item">Change Watcher</a>
								<a href="/apidocs/v5/fake-io-globbing-operators.html" class="navbar-item">Globbing</a>
								<a href="/apidocs/v5/fake-io-zip.html#Functions and values" class="navbar-item">Zip</a>
							</div>
						</div>
						<div class="navbar-item has-dropdown is-hoverable">
							<a href="/apidocs/v5/index.html#Fake.JavaScript" class="navbar-link">JavaScript</a>
							<div class="navbar-dropdown" class="navbar-item">
								<a href="/apidocs/v5/fake-javascript-npm.html" class="navbar-item">Npm</a>
								<a href="/apidocs/v5/fake-javascript-yarn.html" class="navbar-item">Yarn</a>
							</div>
						</div>
						<div class="navbar-item has-dropdown is-hoverable">
							<a href="/apidocs/v5/index.html#Fake.Net" class="navbar-link">Net</a>
							<div class="navbar-dropdown" class="navbar-item">
								<a href="/net-http.html" class="navbar-item">Http</a>
							</div>
						</div>
						<div class="navbar-item has-dropdown is-hoverable">
							<a href="/apidocs/v5/index.html#Fake.Sql" class="navbar-link">Sql</a>
							<div class="navbar-dropdown" class="navbar-item">
								<a href="/sql-dacpac.html" class="navbar-item">DacPac</a>
								<a href="/sql-sqlserver.html" class="navbar-item">SQL Server</a>
							</div>
						</div>
						<div class="navbar-item has-dropdown is-hoverable">
							<a href="/apidocs/v5/index.html#Fake.Testing" class="navbar-link">Testing</a>
							<div class="navbar-dropdown" class="navbar-item">
								<a href="/testing-sonarqube.html" class="navbar-item">SonarQube</a>
								<a href="/testing-reportgenerator.html" class="navbar-item">ReportGenerator</a>
							</div>
						</div>
						<div class="navbar-item has-dropdown is-hoverable">
							<a href="/apidocs/v5/index.html#Fake.Tools" class="navbar-link">Tools</a>
							<div class="navbar-dropdown" class="navbar-item">
								<a href="/apidocs/v5/index.html#Fake.Tools.Git" class="navbar-item">Git</a>
								<a href="/fake-tools-pickles.html" class="navbar-item">Pickles</a>
								<a href="/fake-tools-octo.html" class="navbar-item">Octo</a>
								<a href="/apidocs/v5/fake-tools-rsync.html" class="navbar-item">Rsync</a>
							</div>
						</div>
						<div class="navbar-item has-dropdown is-hoverable">
							<a href="/apidocs/v5/index.html#Fake.Windows" class="navbar-link">Windows</a>
							<div class="navbar-dropdown" class="navbar-item">
								<a href="/windows-chocolatey.html" class="navbar-item">Chocolatey</a>
							</div>
							<div class="navbar-dropdown" class="navbar-item">
								<a href="/apidocs/v5/fake-windows-registry.html" class="navbar-item">Registry</a>
							</div>
						</div>
						<div class="navbar-item has-dropdown is-hoverable">
							<a href="/apidocs/v5/legacy/index.html#Fake" class="navbar-link">Legacy / Not Migrated</a>
							<div class="navbar-dropdown" class="navbar-item">
								<a href="/todo-fluentmigrator.html" class="navbar-item">?.?.FluentMigrator</a>
								<a href="/todo-androidpublisher.html" class="navbar-item">?.?.AndroidPublisher</a>
								<a href="/todo-wix.html" class="navbar-item">Windows.WiX</a>
								<a href="/todo-msteamsnotification.html" class="navbar-item">API.MsTeams</a>
								<a href="/todo-stylecop.html" class="navbar-item">DotNet.StyleCop</a>
								<a href="/todo-deploy.html" class="navbar-item">Fake.Deploy</a>
								<a href="/todo-iis.html" class="navbar-item">?.?.IIS</a>
								<a href="/todo-vagrant.html" class="navbar-item">?.?.Vagrant</a>
								<a href="/todo-fxcop.html" class="navbar-item">DotNet.FxCop</a>
								<a href="/todo-canopy.html" class="navbar-item">DotNet.Testing.Canopy</a>
								<a href="/todo-octopusdeploy.html" class="navbar-item">?.?.OctopusDeploy</a>
								<a href="/todo-typescript.html" class="navbar-item">JavaScript?.TypeScript</a>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="navbar-end">
				<div class="navbar-item has-dropdown is-hoverable">
					<a href="/apidocs/v5/index.html" class="navbar-link">API Reference</a>
					<div class="navbar-dropdown is-right">
						<a href="/apidocs/v5/index.html" class="navbar-item">FAKE 5 API Reference</a>
						<a href="/apidocs/v5/legacy/index.html" class="navbar-item">FAKE 5 Migration API</a>
						<a href="/apidocs/v4/index.html" class="navbar-item">FAKE 4 API Reference</a>
					</div>
				</div>

				<div class="navbar-item has-dropdown is-hoverable">
					<a class="navbar-link">FAKE 4</a>
					<div class="navbar-dropdown is-right">
						<a href="/fake-migrate-to-fake-5.html" class="navbar-item">FAKE migration</a>
						<a href="/legacy-gettingstarted.html" class="navbar-item">Getting started</a>
						<a href="/help-docs.html" class="navbar-item">Where is XYZ???</a>
						<a href="/legacy-commandline.html" class="navbar-item">Running FAKE from command line</a>
						<a href="/legacy-core-targets.html" class="navbar-item">Targets</a>
						<a href="/fake-cache.html" class="navbar-item">Build script caching</a>
					</div>
				</div>
				<div class="navbar-item no-hover">
					<div class="buttons">
						<a href="https://github.com/fsharp/FAKE" class="m-r-sm">
							<i class="fab fa-github fa-lg fa-fw"></i>
						</a>
						<a href="https://twitter.com/fsharpMake" class="m-r-sm">
							<i class="fab fa-twitter fa-lg fa-fw"></i>
						</a>
						<a href="https://fsharp.slack.com/" class="m-r-sm">
							<i class="fab fa-slack fa-lg fa-fw"></i>
						</a>
					</div>
				</div>
			</div>
		</div>
	</nav>

	

<section id="content" class="section">
	<div class="columns">
		<div class="column is-9-desktop is-12-mobile">
			<article class="content">
				<h1><a name="Running-targets-in-FAKE-F-Make" class="anchor" href="#Running-targets-in-FAKE-F-Make">Running targets in "FAKE - F# Make"</a></h1>
<div class="alert alert-info">
    <h5>INFO</h5>
    <p>This documentation is for FAKE.exe before version 5 (or the non-netcore version). The documentation for FAKE 5 can be found <a href="core-targets.html">here </a></p>
</div>
<h2><a name="Listing-targets" class="anchor" href="#Listing-targets">Listing targets</a></h2>
<p>Before running any specific target it is useful to know all the targets that are available in a build script.
FAKE can list all the avaiable targets including the dependencies by running the following command:</p>
<ul>
<li>Fake.exe <em>YourBuildScript</em> -lt</li>
</ul>
<p>The option <em>-lt</em> stands for "list targets". It is an abbreviation of the option <em>--listTargets</em>.</p>
<h2><a name="Running-specific-targets" class="anchor" href="#Running-specific-targets">Running specific targets</a></h2>
<p>FAKE has a special param "target" which can be used to run specific targets in a build. We assume the following build script:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// include Fake libs</span>
<span class="pp">#I</span> <span class="s">@&quot;tools\FAKE&quot;</span>
<span class="pp">#r</span> <span class="s">&quot;FakeLib.dll&quot;</span>
<span class="k">open</span> <span class="id">Fake</span>

<span class="c">// *** Define Targets ***</span>
<span class="id">Target</span> <span class="s">&quot;Clean&quot;</span> <span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span class="pn">)</span> <span class="k">-&gt;</span>
	<span class="id">trace</span> <span class="s">&quot; --- Cleaning stuff --- &quot;</span>
<span class="pn">)</span>

<span class="id">Target</span> <span class="s">&quot;Build&quot;</span> <span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span class="pn">)</span> <span class="k">-&gt;</span>
	<span class="id">trace</span> <span class="s">&quot; --- Building the app --- &quot;</span>
<span class="pn">)</span>

<span class="id">Target</span> <span class="s">&quot;Deploy&quot;</span> <span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span class="pn">)</span> <span class="k">-&gt;</span>
	<span class="id">trace</span> <span class="s">&quot; --- Deploying app --- &quot;</span>
<span class="pn">)</span>

<span class="c">// *** Define Dependencies ***</span>
<span class="s">&quot;Clean&quot;</span>
  <span class="o">==&gt;</span> <span class="s">&quot;Build&quot;</span>
  <span class="o">==&gt;</span> <span class="s">&quot;Deploy&quot;</span>

<span class="c">// *** Start Build ***</span>
<span class="id">RunTargetOrDefault</span> <span class="s">&quot;Deploy&quot;</span>
</code></pre></td>
</tr>
</table>
<p>Now we have the following options:</p>
<ul>
<li>Fake.exe "target=Build" --&gt; starts the <em>Build</em> target and runs the dependency <em>Clean</em></li>
<li>Fake.exe Build --&gt; starts the <em>Build</em> target and runs the dependency <em>Clean</em></li>
<li>Fake.exe Build --single-target --&gt; starts only the <em>Build</em> target and runs no dependencies</li>
<li>Fake.exe Build -st --&gt; starts only the <em>Build</em> target and runs no dependencies</li>
<li>Fake.exe --&gt; starts the Deploy target (and runs the dependencies <em>Clean</em> and <em>Build</em>)</li>
</ul>
<h2><a name="Final-targets" class="anchor" href="#Final-targets">Final targets</a></h2>
<p>Final targets can be used for TearDown functionality.
These targets will be executed even if the build fails but have to be activated via ActivateFinalTarget().</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="id">FinalTarget</span> <span class="s">&quot;CloseSomePrograms&quot;</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">_</span> <span class="k">-&gt;</span>
	<span class="c">// close stuff and release resources</span>
<span class="pn">)</span>

<span class="c">// Activate FinalTarget somewhere during build</span>
<span class="id">ActivateFinalTarget</span> <span class="s">&quot;CloseSomePrograms&quot;</span>
</code></pre></td>
</tr>
</table>
<h2><a name="Build-failure-targets" class="anchor" href="#Build-failure-targets">Build failure targets</a></h2>
<p>Build failure targets can be used to execute tasks after a build failure.
These targets will be executed only after a build failure but have to be activated via ActivateBuildFailureTarget().</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="id">BuildFailureTarget</span> <span class="s">&quot;ReportErrorViaMail&quot;</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">_</span> <span class="k">-&gt;</span>
	<span class="c">// send mail about the failure</span>
<span class="pn">)</span>

<span class="c">// Activate BuildFailureTarget somewhere during build</span>
<span class="id">ActivateBuildFailureTarget</span> <span class="s">&quot;ReportErrorViaMail&quot;</span>
</code></pre></td>
</tr>
</table>
<h2><a name="Visualising-target-dependencies" class="anchor" href="#Visualising-target-dependencies">Visualising target dependencies</a></h2>
<p>FAKE can output the graph of target dependencies in the <a href="http://www.graphviz.org/doc/info/lang.html">DOT</a>
format, which can then be rendered to a PNG-file by <a href="http://www.graphviz.org">Graphviz</a>.</p>
<p>Specifying the command line option <em>--dotGraph</em> (short version: <em>-dg</em>) makes FAKE write
the dependency graph to the standard output <em>instead</em> of building anything. This option only works when
the build script contains a call like this:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="id">RunTargetOrDefault</span> <span class="s">&quot;Default&quot;</span>
</code></pre></td>
</tr>
</table>
<h3><a name="Example" class="anchor" href="#Example">Example</a></h3>
<p>Say, the build script <code>build.fsx</code> defines the target dependencies as follows:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// The rest of the script is omitted...</span>

<span class="s">&quot;BuildJs&quot;</span>
  <span class="o">==&gt;</span> <span class="s">&quot;WebPackage&quot;</span> <span class="o">&lt;=&gt;</span> <span class="s">&quot;AdminPackage&quot;</span> <span class="o">&lt;=&gt;</span> <span class="s">&quot;WebApiPackage&quot;</span>
  <span class="o">==&gt;</span> <span class="s">&quot;MainAppPackage&quot;</span>
</code></pre></td>
</tr>
</table>
<p>The following command saves the target dependency graph in the <code>graph.png</code> file (PowerShell syntax):</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="id">FAKE</span><span class="pn">.</span><span class="id">exe</span> <span class="id">build</span><span class="pn">.</span><span class="id">fsx</span> <span class="o">-</span><span class="id">dg</span> <span class="pn">|</span> <span class="o">&amp;</span> <span class="id">&#39;</span><span class="id">C</span><span class="pn">:</span><span class="o">/</span><span class="id">Program</span> <span class="id">Files</span> <span class="pn">(</span><span class="id">x86</span><span class="pn">)</span><span class="o">/</span><span class="id">Graphviz2</span><span class="pn">.</span><span class="n">38</span><span class="o">/</span><span class="id">bin</span><span class="o">/</span><span class="id">dot</span><span class="pn">.</span><span class="id">exe&#39;</span> <span class="o">-</span><span class="id">Tpng</span> <span class="o">-</span><span class="id">o</span> <span class="pn">.</span><span class="o">/</span><span class="id">graph</span><span class="pn">.</span><span class="id">png</span>
</code></pre></td>
</tr>
</table>
<p>resulting in an image like this:</p>
<p><img src="pics/specifictargets/graph.png" alt="graph" title="Dependency graph" /></p>
<h1><a name="Using-FAKE-s-parallel-option" class="anchor" href="#Using-FAKE-s-parallel-option">Using FAKE's parallel option</a></h1>
<p>Since multithreading is beneficial (especially for large projects) FAKE allows to specify the
number of threads used for traversing the dependency tree.
This option of course only affects independent targets whereas dependent targets will
still be exectued in order.</p>
<h2><a name="Setting-the-number-of-threads" class="anchor" href="#Setting-the-number-of-threads">Setting the number of threads</a></h2>
<p>The number of threads used can be set using the environment variable <code>parallel-jobs</code>.
This can be achieved in various ways where the easiest one is to use FAKE's built-in support for
setting environment variables:</p>
<p><code>FAKE.exe *YourBuildScript* "parallel-jobs=8"</code></p>
<p>Note that the dependency tree will be traversed as usual whenever setting <code>parallel-jobs</code> to a value <code>&lt;= 1</code> or omiting it entirely.</p>
<h2><a name="Issues" class="anchor" href="#Issues">Issues</a></h2>
<ul>
<li>Running targets in parallel is of course only possible when the target-functions themselves are thread-safe.</li>
<li>Parallel execution may also cause races on stdout and build-logs may therefore be quite obfuscated.</li>
<li>Error detection may suffer since it's not possible to determine a first error when targets are running in parallel</li>
</ul>
<p>Due to these limitations it is recommended to use the standard sequential build whenever checking for errors (CI, etc.)
However when a fast build is desired (and the project is e.g. known to build successfully) the parallel option might be helpful</p>
<h2><a name="Example-1" class="anchor" href="#Example-1">Example</a></h2>
<p>When using this parallel option, Fake resolves the build dependency hierearchies from the described paths and builds independend paths as parallel if you have multiple CPUs available.
For example this dependency tree:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="s">&quot;Task 1&quot;</span>
 <span class="o">==&gt;</span> <span class="s">&quot;Task A2&quot;</span>
 <span class="o">==&gt;</span> <span class="s">&quot;Task 3&quot;</span>

<span class="s">&quot;Task 1&quot;</span>
 <span class="o">==&gt;</span> <span class="s">&quot;Task B2&quot;</span>
 <span class="o">==&gt;</span> <span class="s">&quot;Task 3&quot;</span>

<span class="s">&quot;Task C2&quot;</span>
 <span class="o">==&gt;</span> <span class="s">&quot;Task 3&quot;</span>

<span class="s">&quot;Task 3&quot;</span>
 <span class="o">==&gt;</span> <span class="s">&quot;Task A4&quot;</span>

<span class="s">&quot;Task 3&quot;</span>
 <span class="o">==&gt;</span> <span class="s">&quot;Task B4&quot;</span>
</code></pre></td>
</tr>
</table>
<p>...would be treated as follows:</p>
<p><img src="pics/parallel/ParallelExample.png" alt="" /></p>
<p>This is in addition to that that MSBuild may use multiple threads when building one solution having multiple independent project-files.</p>
<h1><a name="Writing-custom-C-tasks-for-FAKE" class="anchor" href="#Writing-custom-C-tasks-for-FAKE">Writing custom C# tasks for FAKE</a></h1>
<p>"FAKE - F# Make" is intended to be an extensible build framework and therefor it should be as easy as possible to create custom tasks.
This tutorial shows how to create a (very simple) custom task in C#.</p>
<h2><a name="Creating-a-custom-task" class="anchor" href="#Creating-a-custom-task">Creating a custom task</a></h2>
<p>Open Visual Studio and create a new C# class library called my MyCustomTask and create a class called RandomNumberTask:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="csharp"><span class="k">using</span> System;

<span class="k">namespace</span> MyCustomTask
{
  <span class="k">public</span> <span class="k">class</span> RandomNumberTask
  {
    <span class="k">public</span> <span class="k">static</span> <span class="k">int</span> RandomNumber(<span class="k">int</span> min, <span class="k">int</span> max)
    {
      <span class="k">var</span> random <span class="o">=</span> <span class="k">new</span> Random();
      <span class="k">return</span> random.Next(min, max);
    }
  }
}
</code></pre></td></tr></table>
<h2><a name="Using-the-custom-task" class="anchor" href="#Using-the-custom-task">Using the custom task</a></h2>
<p>Compile the project and put the generated assembly into the <em>tools/FAKE</em> path of your project. Now you can use your CustomTask in the build script:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// include Fake libs</span>
<span class="pp">#I</span> <span class="s">@&quot;tools\FAKE&quot;</span>
<span class="pp">#r</span> <span class="s">&quot;FakeLib.dll&quot;</span>

<span class="c">// include CustomTask</span>
<span class="pp">#r</span> <span class="s">&quot;MyCustomTask.dll&quot;</span>
<span class="k">open</span> <span class="id">Fake</span>

<span class="c">// open CustomNamespace</span>
<span class="k">open</span> <span class="id">MyCustomTask</span>

<span class="c">// use custom functionality</span>
<span class="id">RandomNumberTask</span><span class="pn">.</span><span class="id">RandomNumber</span><span class="pn">(</span><span class="n">2</span><span class="pn">,</span><span class="n">13</span><span class="pn">)</span>
  <span class="o">|&gt;</span> <span class="id">tracefn</span> <span class="s">&quot;RandomNumber: %d&quot;</span>
</code></pre></td>
</tr>
</table>
<p>If you want to use FAKE's standard functionality (like <a href="http://en.wikipedia.org/wiki/Glob_(programming)">globbing</a>) within your CustomTask project, just reference FakeLib.dll and <a href="apidocs/v5/legacy/index.html">explore the FAKE namespace</a>.</p>
<h1><a name="Soft-dependencies" class="anchor" href="#Soft-dependencies">Soft dependencies</a></h1>
<p>Typically you will define dependencies among your targets using the <code>==&gt;</code> and <code>&lt;==</code> operators, and these
dependencies define the order in which the targets are executed during a build.</p>
<p>You can also define soft dependencies among targets using the  <code>?=&gt;</code> and <code>&lt;=?</code> operators.  For example, you might
say that target B has a soft dependency on target A:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="s">&quot;A&quot;</span> <span class="o">?=&gt;</span> <span class="s">&quot;B&quot;</span>
<span class="c">// Or equivalently</span>
<span class="s">&quot;B&quot;</span> <span class="o">&lt;=?</span> <span class="s">&quot;A&quot;</span>
</code></pre></td>
</tr>
</table>
<p>With this soft dependency, running B will not require that A be run first. However it does mean that <em>if</em> A is run
(due to other dependencies) it must be run before B.</p>
<h2><a name="Example-2" class="anchor" href="#Example-2">Example</a></h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// *** Define Targets ***</span>
<span class="id">Target</span> <span class="s">&quot;Clean&quot;</span> <span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span class="pn">)</span> <span class="k">-&gt;</span>
	<span class="id">trace</span> <span class="s">&quot; --- Cleaning stuff --- &quot;</span>
<span class="pn">)</span>

<span class="id">Target</span> <span class="s">&quot;Build&quot;</span> <span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span class="pn">)</span> <span class="k">-&gt;</span>
	<span class="id">trace</span> <span class="s">&quot; --- Building the app --- &quot;</span>
<span class="pn">)</span>

<span class="id">Target</span> <span class="s">&quot;Rebuild&quot;</span> <span class="id">DoNothing</span>

<span class="c">// *** Define Dependencies ***</span>
<span class="s">&quot;Build&quot;</span> <span class="o">==&gt;</span> <span class="s">&quot;Rebuild&quot;</span>
<span class="s">&quot;Clean&quot;</span> <span class="o">==&gt;</span> <span class="s">&quot;Rebuild&quot;</span>
<span class="c">// Make sure &quot;Clean&quot; happens before &quot;Build&quot;, if &quot;Clean&quot; is executed during a build.</span>
<span class="s">&quot;Clean&quot;</span> <span class="o">?=&gt;</span> <span class="s">&quot;Build&quot;</span>
</code></pre></td>
</tr>
</table>

				
			</article>
		</div>

		<aside class="menu column is-3 is-hidden-touch">
			<ul class="menu-list"></ul>
		</aside>
	</div>
</section>

	<footer>
		<div class="hero is-dark">
			<div class="hero-body">
				<div class="container">
					<div class="columns">
						<div class="column is-6">
							<div class="columns">
								<div class="column is-6">
									<h4 class="title is-4">Important links</h4>
									<ul class="has-text-grey-light">
										<li><a href="/fake-gettingstarted.html">Getting started</a></li>
										<li><a href="/fake-fake5-modules.html">Modules</a></li>
										<li><a href="/fake-fake5-modules.html#Declaring-FAKE-5-dependencies-within-the-script">FAKE Header</a></li>
									</ul>
								</div>
								<div class="column is-6">
									<h4 class="title is-4">Further projects</h4>
									<ul class="has-text-grey-light">
										<li><a href="https://fsprojects.github.io/Paket/">Paket</a></li>
										<li><a href="https://fsprojects.github.io/FSharp.Formatting/">FSharp Formatting</a></li>
										<li><a href="http://fsharp.org/">F#</a></li>
										<li><a href="http://ionide.io/">Ionide</a></li>
										<li><a href="http://forge.run/">Forge</a></li>
										<li><a href="https://fsharp.github.io/FSharp.Compiler.Service/">FSharp.Compiler.Service</a></li>
									</ul>
								</div>
							</div>
							<div class="p-t-lg has-text-grey-light">© FAKE. All rights reserved | Page generated with Version: <a href="https://github.com/fsharp/FAKE/releases">5.12.6-alpha.938</a></div>
						</div>
						<div class="column is-6">
							<h4 class="title is-4">FAKE is a community effort</h4>
							<p>Please help with the development of FAKE, a free, fully open source DSL and Runtime for
								running F# scripts. Look at the open issues at <a href="https://github.com/fsharp/FAKE/issues">GitHub</a>,
								discuss new features, fix bugs and
								send pull requests!</p>
							<a href="/contributing.html" class="button is-light is-medium m-t-md">Learn more</a>

							<h4 class="title is-4 m-t-lg">Get in touch</h4>

							<div class="footer-contact">
								<div class="columns">
									<div class="column is-2">Twitter</div>
									<div class="column is-6"><a href="https://twitter.com/fsharpMake">@fsharpMake</a></div>
								</div>
								<div class="columns">
									<div class="column is-2">WWW</div>
									<div class="column is-6"><a href="https://fake.build">fake.build</a></div>
								</div>
								<div class="columns">
									<div class="column is-2">GitHub</div>
									<div class="column is-6"><a href="https://github.com/fsharp/FAKE">GitHub</a></div>
								</div>
								<div class="columns">
									<div class="column is-2">F# Slack</div>
									<div class="column is-6"><a href="https://fsharp.slack.com/">Slack</a></div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</footer>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/prism.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-fsharp.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-bash.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-batch.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-json.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/plugins/toolbar/prism-toolbar.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/plugins/normalize-whitespace/prism-normalize-whitespace.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/plugins/line-numbers/prism-line-numbers.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
	<script src="/assets/js/tips.js" type="text/javascript"></script>
	<script src="/assets/js/bulma.js"></script>
</body>

</html>
